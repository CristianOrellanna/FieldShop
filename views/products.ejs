<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--icon-->
    <link rel="shortcut icon" href="https://i.ibb.co/fkhvBg0/retail.png" />
    <!--CSS-->
    <link rel="stylesheet" href="resources/css/style.css">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <title>Productos-Fieldshop</title>
</head>

<body>
    <!--navbar-->
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
                <span class="logo">FieldShop</span>
            </a>

            <div style="flex-grow: 1; display: flex; justify-content: center;">
                <ul class="nav nav-pills">
                    <li><a href="/" class="nav-link px-2 link-secondary">Inicio</a></li>
                    <li><a href="/products" class="nav-link px-2 link-secondary">Productos</a></li>
                    <li><a href="/us" class="nav-link px-2 link-secondary">Nosotros</a></li>
                    <li><a href="/contact" class="nav-link px-2 link-secondary">Contacto</a></li>
                </ul>
            </div>

            <!--Login y register usando la variable name definida en app.js-->
            <% if (login) { %>
                <button type="button" class="btn btn-outline-dark"
                    style="width: 150px; height: 38px; margin-right: 5px;" onclick="location.href='/logout';">Cerrar
                    sesión</button>
                <%} else { %>
                    <button type="button" class="btn btn-outline-dark"
                        style="width: 150px; height: 38px; margin-right: 5px;"
                        onclick="location.href='/register';">Registrarse</button>
                    <% } %>

                        <% if (login) { %>
                            <button class="btn btn-dark" style="width: 150px; height: 38px; margin-right: 5px;">
                                <p>
                                    <%= name %>
                                </p>
                            </button>
                            <%} else { %>
                                <button class="btn btn-dark" style="width: 150px; height: 38px; margin-right: 5px;"
                                    onclick="location.href='/login';">
                                    <%= name %>
                                </button>
                                <% } %>
        </header>
    </div>

    <!--variable "esAdmin" verifica si el usuario es admin y solo a el le muestra este contenido-->
    <div class="formularioAdmin">
        <% if (esAdmin) { %>

            <div class="px-4 py-5 my-5 text-center">
                <img class="d-block mx-auto mb-4" src="https://i.ibb.co/4pGFY1Y/administracion.png" alt="" width="72"
                    height="70">
                <h1 class="display-5 fw-bold">Hola Admin!</h1>
                <div class="col-lg-6 mx-auto">
                    <p class="lead mb-4">Tienes permisos especiales, solo tú puedes ver este contenido. Podrás observar
                        un formulario en el cual puedes ingresar los cambios que deseas que se realicen en los
                        productos, tales como la modificación de precios, nombres, etc. Al igual que los productos que
                        deseas agregar y/o eliminar.</p>
                </div>
            </div>

            <%} else { %>

                <% } %>
    </div>

    <!--Se muestran los productos, carrito y total de las funciones especificadas en el script del final-->
    <div class="container">
        <h2 class="text-center Tittle-Home">Productos</h2></br></br>
        <div id="productos"></div>
    </div>

    <div class="container">
        <h2 class="text-center Tittle-Home">Carrito</h2></br></br>
        <div id="carrito"></div>
    </div>

    <div class="container">
        <h2 class="text-center Tittle-Home">Total</h2>
        <div id="total"></div>
    </div>

    <!-- si el usuario inicia sesion puede comprar, del contrario se le redirecciona al login -->
    <div class="d-flex justify-content-center" id="botonCompra">
        <% if (login) { %>
            <div class="container">
                <div class="d-flex justify-content-center">
                    <button onclick="comprar()" class="btn btn-dark">Continuar compra</button>
                </div>
                <% if (esAdmin) { %>
                    <!-- Formulario para administradores -->
                    <hr class="my-4">
                    <h2 class="text-center Tittle-Home">Gestion de productos por un Administrador</h2>
                    <hr class="my-4">
                    <div class="container">
                        <!-- Sección de agregar productos -->
                        <div class="mb-4">
                            <form action="https://formspree.io/f/xjvnppva" method="POST">
                            <div class="d-flex justify-content-center">
                                <h3>Agregar nuevos productos</h3>
                            </div><br>
                            <div class="row">
                                <div class="col">
                                        <!-- primer producto a agregar -->
                                        <div class="mb-3">
                                            <label for="nombrePrimerProductoAgregar" class="form-label">Nombre del primer producto a
                                                agregar</label>
                                            <input type="text" class="form-control" id="nombrePrimerProductoAgregar"
                                                name="nombrePrimerProductoAgregar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="precioPrimerProductoAgregar" class="form-label">Precio del producto</label>
                                            <input type="number" class="form-control" id="precioPrimerProductoAgregar"
                                                name="precioPrimerProductoAgregar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="imagenPrimerProductoAgregar" class="form-label">Link de la imagen del
                                                producto</label>
                                            <input type="text" class="form-control" id="imagenPrimerProductoAgregar"
                                                name="imagenPrimerProductoAgregar">
                                        </div>
                                </div>
                                <div class="col">
                                        <!-- segundo producto a agregar -->
                                        <div class="mb-3">
                                            <label for="nombreSegundoProductoAgregar" class="form-label">Nombre del segundo producto a
                                                agregar</label>
                                            <input type="text" class="form-control" id="nombreSegundoProductoAgregar"
                                                name="nombreSegundoProductoAgregar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="precioSegundoProductoAgregar" class="form-label">Precio del producto</label>
                                            <input type="number" class="form-control" id="precioSegundoProductoAgregar"
                                                name="precioSegundoProductoAgregar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="imagenSegundoProductoAgregar" class="form-label">Link de la imagen del
                                                producto</label>
                                            <input type="text" class="form-control" id="imagenSegundoProductoAgregar"
                                                name="imagenSegundoProductoAgregar">
                                        </div>
                                </div>
                                <div class="col">
                                        <!-- tercer producto a agregar -->
                                        <div class="mb-3">
                                            <label for="nombreTercerProductoAgregar" class="form-label">Nombre del tercer producto a
                                                agregar</label>
                                            <input type="text" class="form-control" id="nombreTercerProductoAgregar"
                                                name="nombreTercerProductoAgregar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="precioTercerProductoAgregar" class="form-label">Precio del producto</label>
                                            <input type="number" class="form-control" id="precioTercerProductoAgregar"
                                                name="precioTercerProductoAgregar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="imagenTercerProductoAgregar" class="form-label">Link de la imagen del
                                                producto</label>
                                            <input type="text" class="form-control" id="imagenTercerProductoAgregar"
                                                name="imagenTercerProductoAgregar">
                                        </div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-success">Enviar agregacion del
                                        producto</button>
                                </div>                    
                            </div>
                        </form>
                        </div>

                        <!-- Sección de modificar productos -->
                        <div class="mb-4">
                            <form action="https://formspree.io/f/xjvnppva" method="POST">
                            <hr class="my-4">
                            <div class="d-flex justify-content-center">
                                <h3>Modificar productos</h3>
                            </div><br>
                            <div class="row">
                                <div class="col">
                                        <!-- primer producto a modificar -->
                                        <div class="mb-3">
                                            <label for="nombrePrimerProductoModificar" class="form-label">Nombre del primer producto a
                                                modificar</label>
                                            <input type="text" class="form-control" id="nombrePrimerProductoModificar"
                                                name="nombrePrimerProductoModificar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="precioPrimerProductoModificar" class="form-label">Nuevo precio del
                                                producto</label>
                                            <input type="number" class="form-control" id="precioPrimerProductoModificar"
                                                name="precioPrimerProductoModificar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="imagenPrimerProductoAgregar" class="form-label">Link de la nueva imagen del
                                                producto</label>
                                            <input type="text" class="form-control" id="imagenProducto"
                                                name="imagenPrimerProductoAgregar">
                                        </div>
                                </div>
                                <div class="col">
                                        <!-- segundo producto a modificar -->
                                        <div class="mb-3">
                                            <label for="nombreSegundoProductoModificar" class="form-label">Nombre del segundo producto a
                                                modificar</label>
                                            <input type="text" class="form-control" id="nombreSegundoProductoModificar"
                                                name="nombreSegundoProductoModificar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="precioSegundoProductoModificar" class="form-label">Nuevo precio del
                                                producto</label>
                                            <input type="number" class="form-control" id="precioSegundoProductoModificar"
                                                name="precioSegundoProductoModificar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="imagenSegundoProductoModificar" class="form-label">Link de la nueva imagen del
                                                producto</label>
                                            <input type="text" class="form-control" id="imagenSegundoProductoModificar"
                                                name="imagenSegundoProductoModificar">
                                        </div>
                                </div>
                                <div class="col">
                                        <!-- tercer producto a modificar -->
                                        <div class="mb-3">
                                            <label for="nombreTercerProductoModificar" class="form-label">Nombre del tercer producto a
                                                modificar</label>
                                            <input type="text" class="form-control" id="nombreTercerProductoModificar"
                                                name="nombreTercerProductoModificar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="precioTercerProductoModificar" class="form-label">Nuevo precio del
                                                producto</label>
                                            <input type="number" class="form-control" id="precioTercerProductoModificar"
                                                name="precioTercerProductoModificar">
                                        </div>
                                        <div class="mb-3">
                                            <label for="imagenTercerProductoModificar" class="form-label">Link de la nueva imagen del
                                                producto</label>
                                            <input type="text" class="form-control" id="imagenTercerProductoModificar"
                                                name="imagenTercerProductoModificar">
                                        </div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-warning text-white">Enviar modificacion del
                                        producto</button>
                                </div>                               
                            </div>
                        </form>
                        </div>

                        <!-- Sección de eliminar productos -->
                        <div class="mb-4">
                            <form action="https://formspree.io/f/xjvnppva" method="POST">
                            <hr class="my-4">
                            <div class="d-flex justify-content-center">
                                <h3>Eliminar productos</h3>
                            </div><br>
                            <div class="row">
                                <div class="col">
                                        <!-- primer producto a eliminar -->
                                        <div class="mb-3">
                                            <label for="nombrePrimerProductoEliminar" class="form-label">Nombre del primer producto a
                                                eliminar</label>
                                            <input type="text" class="form-control" id="nombrePrimerProductoEliminar"
                                                name="nombrePrimerProductoEliminar">
                                        </div>
                                </div>
                                <div class="col">
                                        <!-- segundo producto a eliminar -->
                                        <div class="mb-3">
                                            <label for="nombreSegundoProductoEliminar" class="form-label">Nombre del segundo producto a
                                                eliminar</label>
                                            <input type="text" class="form-control" id="nombreSegundoProductoEliminar"
                                                name="nombreSegundoProductoEliminar">
                                        </div>
                                </div>
                                <div class="col">
                                        <!-- tercer producto a eliminar -->
                                        <div class="mb-3">
                                            <label for="nombreTercerProductoEliminar" class="form-label">Nombre del tercer producto a
                                                eliminar</label>
                                            <input type="text" class="form-control" id="nombreTercerProductoEliminar"
                                                name="nombreTercerProductoEliminar">
                                        </div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-danger">Enviar eliminacion del
                                        producto</button>
                                </div>
                            </div>  
                        </div>
                    </form>
                    </div>

                    <hr class="my-4">

                    <% } else { %>
                        <!-- Formulario para usuarios comunes -->
                        <!-- No se mostrará si esAdmin es true -->
                        <form action="https://formspree.io/f/xjvnppva" method="POST">
                            <hr class="my-4">
                            <h4 class="mb-3">Dirección de Envío</h4>
                            <div class="row g-3">
                                <div class="col-sm-6">
                                    <label for="nombre" class="form-label">Nombre completo</label>
                                    <input type="text" class="form-control" id="nombre" name="nombre"
                                        placeholder="Ejemplo: Juan Pérez" required>
                                    <div class="invalid-feedback">
                                        Se requiere un nombre válido
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <label for="apellido" class="form-label">Apellido</label>
                                    <input type="text" class="form-control" id="apellido" name="apellido"
                                        placeholder="Ejemplo: Pérez" required>
                                    <div class="invalid-feedback">
                                        Se requiere un apellido válido
                                    </div>
                                </div>

                                <div class="col-12">
                                    <label for="usuario" class="form-label">Nombre de usuario</label>
                                    <div class="input-group has-validation">
                                        <span class="input-group-text">@</span>
                                        <input type="text" class="form-control" id="username" name="username"
                                            placeholder="Username" value="<%= name %>" readonly>
                                        <div class="invalid-feedback">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <label for="email" class="form-label">Correo electrónico</label>
                                    <input type="email" class="form-control" id="email" name="email"
                                        placeholder="correo@gmail.com" required>
                                    <div class="invalid-feedback">
                                        Ingrese una dirección de correo electrónico válida para recibir actualizaciones
                                        del
                                        envío
                                    </div>
                                </div>

                                <div class="col-12">
                                    <label for="telefono" class="form-label">Telefono (opcional)</label>
                                    <input type="number" class="form-control" id="telefono" name="telefono"
                                        placeholder="+56(9)">
                                    <div class="invalid-feedback">
                                        Ingrese una telefono válido
                                    </div>
                                </div>

                                <div class="col-12">
                                    <label for="direccion" class="form-label">Dirección de envío</label>
                                    <input type="text" class="form-control" id="direccion" name="direccion"
                                        placeholder="Ejemplo: Calle 123 Av..." required>
                                    <div class="invalid-feedback">
                                        Por favor introduzca su dirección de envío
                                    </div>
                                </div>

                                <div class="input-group">
                                    <span class="input-group-text">Aporte una descripcion de su vivienda
                                        (opcional)</span>
                                    <textarea class="form-control" id="descripcion" name="descripcion"
                                        aria-label="With textarea"></textarea>
                                </div>
                            </div>

                            <h4 class="mb-3">Metodo de pago</h4>
                            <p>Seleccione el método de pago que utilizará. Esta imformación nos ayuda a realizar el
                                cobro en el
                                momento en que se llegue a su domicilio.</p>

                            <div class="my-3">
                                <div class="form-check">
                                    <input id="credito" name="paymentMethod" type="radio" class="form-check-input"
                                        value="credito" checked required>
                                    <label class="form-check-label" for="credit">Tarjeta de crédito</label>
                                </div>
                                <div class="form-check">
                                    <input id="debito" name="paymentMethod" type="radio" class="form-check-input"
                                        value="debito" required>
                                    <label class="form-check-label" for="debit">Tarjeta de débito</label>
                                </div>
                                <div class="form-check">
                                    <input id="efectivo" name="paymentMethod" type="radio" class="form-check-input"
                                        value="efectivo" required>
                                    <label class="form-check-label" for="paypal">Efectivo</label>
                                </div>
                            </div>

                            <hr class="my-4">

                            <div class="text-center" style="font-family: Arial, sans-serif; color: #333;">
                                <h3 style="font-size: 1.5em; font-weight: bold; margin-bottom: 20px;">Productos a
                                    enviar:</h3>
                                <div id="listaProductos" class="list-group mb-3 mx-auto"
                                    style="list-style-type: none; max-width: 600px; margin: auto;"></div>
                                <div id="camposOcultos"></div>
                            </div>

                            <div class="d-flex justify-content-center">
                                <button type="submit" class="btn btn-success">Confirmar compra</button>
                            </div>
                            <hr class="my-4">
            </div>
            </form>
            <% } %>
    </div>
    <%} else { %>
        <button onclick="location.href='/login';" class="btn btn-dark">Inicia sesión aquí para poder realizar la
            compra</button>
        <% } %>
            </div>

            <!--Carrito de compras con productos almacenados en un array-->
            <script>
                var productos = [
                    { nombre: 'Arroz grado 1 grano largo y ancho 1kg', precio: 2429, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/655914-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Arroz grado 2 grano largo y ancho 1kg', precio: 1829, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/459006-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Arroz grado 2 grano largo y laminado 1kg', precio: 1589, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/453196-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Arroz grado 1 grano largo y ancho 1kg', precio: 1899, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/638211-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Pasta Spaghetti N°5 400g', precio: 1139, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/453113-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Pasta Espiral N°49 400g', precio: 1139, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/453080-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Espirales al huevo 400g', precio: 1289, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/680242-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Pasta spirales Tr3s 400g', precio: 1139, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/680377-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Pack 3un. Coca Cola + Sprite 3L', precio: 8299, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/501515-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Bebida canada dry ginger ale 3L', precio: 2799, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/412055-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Bebida sprite limon3L', precio: 3099, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/643750-450-450?width=450&height=450&aspect=true' },
                    { nombre: 'Bebida Coca-Cola original 3L', precio: 3099, imagen: 'https://jumbo.vtexassets.com/arquivos/ids/655907-450-450?width=450&height=450&aspect=true' }
                ];

                var carrito = [];

                /**
                 * Muestra los productos en la página web.
                 * Cada producto se muestra en una tarjeta con su imagen, nombre y precio.
                 * Incluye un botón para agregar el producto al carrito de compras.
                 */
                function mostrarProductos() {
                    var productosDiv = document.getElementById('productos');
                    productosDiv.innerHTML = '';
                    productosDiv.className = 'row row-cols-1 row-cols-md-4 g-5';
                    productos.forEach(function (producto, index) {
                        var productoDiv = document.createElement('div');
                        productoDiv.className = 'col';
                        var cardDiv = document.createElement('div');
                        cardDiv.className = 'card h-100';
                        cardDiv.innerHTML =
                            '<img src="' + producto.imagen + '" class="card-img-top" alt="' + producto.nombre + '">' +
                            '<div class="card-body text-center">' +
                            '<h5 class="card-title">' + producto.nombre + '</h5>' +
                            '<p class="card-text">Precio: $' + producto.precio + '</p>' +
                            '<button class="btn btn-warning text-white" onclick="agregarAlCarrito(' + index + ')">Agregar al carrito</button>' +
                            '</div>';
                        productoDiv.appendChild(cardDiv);
                        productosDiv.appendChild(productoDiv);
                    });
                }


                //Agrega el producto al carrito
                function agregarAlCarrito(index) {
                    var producto = productos[index];
                    // Busca el producto en el carrito para ver si ya existe.
                    var productoEnCarrito = carrito.find(p => p.nombre === producto.nombre);
                    if (productoEnCarrito) {
                        productoEnCarrito.cantidad++;
                    } else {
                        producto.cantidad = 1;
                        carrito.push(producto);
                    }
                    mostrarCarrito();
                    calcularTotal();
                }

                //Elimina el producto del carrito
                function eliminarDelCarrito(index) {
                    carrito.splice(index, 1);
                    mostrarCarrito();
                    calcularTotal();
                }

                //Si se agrega, modifica la cantidad o se elimina un producto del carrito, esta funcion lo actualiza
                function actualizarCantidad(index, cantidad) {
                    carrito[index].cantidad = cantidad;
                    mostrarCarrito();
                    calcularTotal();
                }

                //Muestra el carrito con los productos agregados o vacio si no contiene productos
                function mostrarCarrito() {
                    var carritoDiv = document.getElementById('carrito');
                    carritoDiv.innerHTML = '';
                    carritoDiv.className = 'row row-cols-1 row-cols-md-5 g-5';
                    carrito.forEach(function (producto, index) {
                        var productoDiv = document.createElement('div');
                        productoDiv.className = 'col';
                        var cardDiv = document.createElement('div');
                        cardDiv.className = 'card h-100';
                        cardDiv.innerHTML =
                            '<img src="' + producto.imagen + '" class="card-img-top" alt="' + producto.nombre + '">' +
                            '<div class="card-body text-center">' +
                            '<h5 class="card-title">' + producto.nombre + '</h5>' +
                            '<p class="card-text">Precio: ' + producto.precio + '</p>' +
                            '<div class="d-flex justify-content-center align-items-center mb-2">' +
                            '<button class="btn btn-primary ml-2" onclick="bajarCantidad(' + index + ')">-</button>' +
                            '<span class="mx-2">' + producto.cantidad + '</span>' +
                            '<button class="btn btn-primary mr-2" onclick="subirCantidad(' + index + ')">+</button>' +
                            '</div>' +
                            '<button class="btn btn-danger mt-2" onclick="eliminarDelCarrito(' + index + ')">Eliminar del carrito</button>' +
                            '</div>';
                        productoDiv.appendChild(cardDiv);
                        carritoDiv.appendChild(productoDiv);
                    });
                }

                //sube la cantidad del producto en 1 cada vez que se presione el boton "+"
                function subirCantidad(index) {
                    carrito[index].cantidad++;
                    mostrarCarrito();
                    calcularTotal();
                }

                //baja la cantidad del producto en 1 cada vez que se presione el boton "-" pero no permite que la cantidad baje de 1
                function bajarCantidad(index) {
                    if (carrito[index].cantidad > 1) {
                        carrito[index].cantidad--;
                    } else {
                        alert('La cantidad mínima para comprar es 1');
                    }
                    mostrarCarrito();
                    calcularTotal();
                }

                //Calcula el total del precio de los productos en el carrito
                function calcularTotal() {
                    var total = 0;
                    carrito.forEach(function (producto) {
                        total += producto.precio * producto.cantidad;
                    });
                    var totalDiv = document.getElementById('total');
                    totalDiv.innerHTML = '<h5 class="text-center">Total a pagar: $' + total + '</h5>';
                }

                mostrarCarrito();
                calcularTotal();

                function comprar() {
                    if (carrito.length > 0) {
                        // Busca el contenedor de los campos ocultos y la lista de productos
                        var camposOcultos = document.getElementById('camposOcultos');
                        var listaProductos = document.getElementById('listaProductos');
                        // Limpia los campos ocultos y la lista de productos
                        camposOcultos.innerHTML = '';
                        listaProductos.innerHTML = '';
                        // Crea un campo oculto y un elemento de lista para cada producto en el carrito
                        carrito.forEach(function (producto, index) {
                            var campoOculto = document.createElement('input');
                            campoOculto.type = 'hidden';
                            campoOculto.name = 'producto' + index;
                            campoOculto.value = producto.nombre + ' - $' + producto.precio + ' Cantidad: ' + producto.cantidad;
                            camposOcultos.appendChild(campoOculto);

                            var productoLi = document.createElement('li');
                            productoLi.textContent = producto.nombre + ' - $' + producto.precio + ' Cantidad: ' + producto.cantidad;
                            listaProductos.appendChild(productoLi);
                        });

                        // Encuentra el div llamado:"botonCompra" en el html y añade el formulario debajo de este
                        var divCompra = document.getElementById('botonCompra');
                        divCompra.parentNode.insertBefore(formulario, divCompra.nextSibling);

                        carrito = []; // Vacía el carrito
                        mostrarCarrito();
                        calcularTotal();
                    } else {
                        alert('Tu carrito está vacío');
                    }
                }

                mostrarProductos();

            </script>


            <!--footer-->
            <footer class="footer">
                <section class="bg-light py-4 py-md-5 py-xl-8 border-top border-light">
                    <div class="container overflow-hidden">
                        <div class="row gy-4 gy-lg-0 justify-content-xl-between">
                            <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                                <div class="widget">
                                    <a href="/" class="text-decoration-none text-dark">
                                        <span class="logo">FieldShop</span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                                <div class="widget">
                                    <h4 class="widget-title mb-4">Contacto</h4>
                                    <address class="mb-4">Plaza de Armas 286, Santa Cruz, O'Higgins</address>
                                    <p class="mb-1">
                                        <a class="link-secondary text-decoration-none" href="#">(+56) 928364735</a>
                                    </p>
                                    <p class="mb-0">
                                        <a class="link-secondary text-decoration-none"
                                            href="mailto:fieldshopstore@gmail.com">fieldshopstore@gmail.com</a>
                                    </p>
                                </div>
                            </div>
                            <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                                <div class="widget">
                                    <h4 class="widget-title mb-4">Saber mas</h4>
                                    <ul class="list-unstyled">
                                        <li class="mb-2">
                                            <a href="/us" class="link-secondary text-decoration-none">Acerca de
                                                nosotros</a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="/contact" class="link-secondary text-decoration-none">Contacto</a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="/products"
                                                class="link-secondary text-decoration-none">Productos</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-12 col-lg-3 col-xl-4">
                                <div class="widget">
                                    <h4 class="widget-title mb-4">Suscripción a la tienda</h4>
                                    <p class="mb-4">Suscríbase a nuestra tienda para recibir nuestras noticias y
                                        descuentos.</p>
                                    <form action="javascript:void(0);" onsubmit="suscripcionDelUsuarioGeneral()">
                                        <div class="row gy-4">
                                            <div class="col-12">
                                                <div class="input-group">
                                                    <span class="input-group-text" id="email-newsletter-addon">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                            fill="currentColor" class="bi bi-envelope"
                                                            viewBox="0 0 16 16">
                                                            <path
                                                                d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z" />
                                                        </svg>
                                                    </span>
                                                    <input type="email" class="form-control" id="email-newsletter"
                                                        value="" placeholder="Correo electronico"
                                                        aria-label="email-newsletter"
                                                        aria-describedby="email-newsletter-addon" required>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <div class="d-grid">
                                                    <button class="btn btn-primary" type="submit">Subscribirse</button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <script>
                                function suscripcionDelUsuarioGeneral() {
                                    var correoUsuario = document.getElementById('email-newsletter').value;
                                    window.location.href = "mailto:fieldshopstore@gmail.com?subject=Subscription&body=Hola, quiero subscribirme a la tienda, mi correo es: " + correoUsuario;
                                }
                            </script>

                        </div>
                    </div>
                </section>

                <div class="bg-light py-4 py-md-5 py-xl-8 border-top border-light-subtle">
                    <div class="container overflow-hidden">
                        <div class="row gy-4 gy-md-0">
                            <div class="col-xs-12 col-md-7 order-1 order-md-0">
                                <div class="copyright text-center text-md-start">
                                    &copy; 2024. Todos los derechos reservados por FieldShop.
                                </div>
                            </div>


                            <div class="col-xs-12 col-md-5 order-0 order-md-1">
                                <ul class="nav justify-content-center justify-content-md-end">
                                    <li class="nav-item">
                                        <a class="nav-link link-dark" href="#!">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
                                                <path
                                                    d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z" />
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link link-dark" href="#!">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                fill="currentColor" class="bi bi-youtube" viewBox="0 0 16 16">
                                                <path
                                                    d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z" />
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link link-dark" href="#!">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
                                                <path
                                                    d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" />
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link link-dark" href="#!">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
                                                <path
                                                    d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z" />
                                            </svg>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </footer>
</body>

</html>